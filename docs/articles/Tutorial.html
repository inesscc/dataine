<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="inedata">
<title>Testing • inedata</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Testing">
<meta property="og:description" content="inedata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">inedata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Tutorial.html">Testing</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Testing</h1>
            
      
      
      <div class="d-none name"><code>Tutorial.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="package-tutorial">Package Tutorial<a class="anchor" aria-label="anchor" href="#package-tutorial"></a>
</h2>
<p>The <code>inedata</code> package allows to download datasets produced
by INE Chile. The package communicates with an API REST, which makes it
possible to retrieve many household survey datasets using R code. All
the available data provided by this API corresponds to files published
on INE’s web site.</p>
<p>At the moment the API is restricted to the institutional network.
Because of that the package works only in this environment. We hope to
make the API available to the general public as soon as possible.</p>
<div class="section level3">
<h3 id="first-steps">First steps<a class="anchor" aria-label="anchor" href="#first-steps"></a>
</h3>
<p>At the moment the package can be installed from github using
devtools.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"inesscc/dataine"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-catalog">Getting catalog<a class="anchor" aria-label="anchor" href="#getting-catalog"></a>
</h3>
<p><code><a href="../reference/get_catalog.html">get_catalog()</a></code> returns a dataframe containing all the
datasets available in the repository and its versions when the
<code>dataset</code> parameter is not specified. The following datasets
are currently available:</p>
<ul>
<li><em>EPF</em></li>
<li><em>ENUSC</em></li>
<li><em>ESI</em></li>
<li><em>ENE</em></li>
</ul>
<p>It also adds summary data in the form of number of columns and rows
per dataset (in the <em>n_col</em> and <em>n_row</em> columns,
respectively). The <em>survey</em> column contains the survey where the
dataset comes from. The <em>version</em> column indicates the year or
quarter when the dataset was collected.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_catalog.html">get_catalog</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 194 × 5</span></span></span>
<span><span class="co">#&gt;    survey version     n_row n_col file_size_MB</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ene    2022-10-son <span style="text-decoration: underline;">92</span>761   174        18.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ene    2022-09-aso <span style="text-decoration: underline;">93</span>085   174        18.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ene    2022-08-jas <span style="text-decoration: underline;">44</span>180   174         8.83</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ene    2022-07-jja <span style="text-decoration: underline;">40</span>935   174         8.14</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ene    2022-06-mjj <span style="text-decoration: underline;">95</span>013   174        18.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ene    2022-05-amj <span style="text-decoration: underline;">95</span>613   174        18.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ene    2022-04-mam <span style="text-decoration: underline;">96</span>914   174        19.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ene    2022-03-fma <span style="text-decoration: underline;">95</span>319   174        18.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ene    2022-02-efm <span style="text-decoration: underline;">86</span>289   188        17.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ene    2022-01-def <span style="text-decoration: underline;">85</span>268   188        17.6 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 184 more rows</span></span></span></code></pre></div>
<p>The <code>dataset</code> parameter retrieves information for a
specific survey. In this example we are using <em>ene</em>, which
returns all the available versions for that survey. We will store the
file version for the june-august-september quarter of 2011 (2011-08-jas)
in a variable called <code>file</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_catalog.html">get_catalog</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 153 × 5</span></span></span>
<span><span class="co">#&gt;    survey version     n_row n_col file_size_MB</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ene    2022-10-son <span style="text-decoration: underline;">92</span>761   174        18.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ene    2022-09-aso <span style="text-decoration: underline;">93</span>085   174        18.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ene    2022-08-jas <span style="text-decoration: underline;">44</span>180   174         8.83</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ene    2022-07-jja <span style="text-decoration: underline;">40</span>935   174         8.14</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ene    2022-06-mjj <span style="text-decoration: underline;">95</span>013   174        18.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ene    2022-05-amj <span style="text-decoration: underline;">95</span>613   174        18.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ene    2022-04-mam <span style="text-decoration: underline;">96</span>914   174        19.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ene    2022-03-fma <span style="text-decoration: underline;">95</span>319   174        18.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ene    2022-02-efm <span style="text-decoration: underline;">86</span>289   188        17.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ene    2022-01-def <span style="text-decoration: underline;">85</span>268   188        17.6 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 143 more rows</span></span></span>
<span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/get_catalog.html">get_catalog</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">version</span><span class="op">==</span><span class="st">"2011-08-jas"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">version</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="getting-columns">Getting columns<a class="anchor" aria-label="anchor" href="#getting-columns"></a>
</h3>
<p>The <code><a href="../reference/get_columns.html">get_columns()</a></code> function returns the columns for a
specific file. It requires two mandatory parameters, namely
<code>dataset</code> and <code>version</code> to fetch the specific
column names. We already have the name of one of the available versions
of the <em>ene</em> survey.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_columns.html">get_columns</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span>, version <span class="op">=</span> <span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1] "ano_trimestre"       "mes_central"         "ano_encuesta"       </span></span>
<span><span class="co">#&gt;   [4] "mes_encuesta"        "region"              "provincia"          </span></span>
<span><span class="co">#&gt;   [7] "r_p_c"               "estrato"             "region_15"          </span></span>
<span><span class="co">#&gt;  [10] "estrato_15"          "r_p_c_15"            "tipo"               </span></span>
<span><span class="co">#&gt;  [13] "id_directorio"       "id_identificacion"   "hogar"              </span></span>
<span><span class="co">#&gt;  [16] "idrph"               "nro_linea"           "edad"               </span></span>
<span><span class="co">#&gt;  [19] "tramo_edad"          "sexo"                "parentesco"         </span></span>
<span><span class="co">#&gt;  [22] "curso"               "nivel"               "termino_nivel"      </span></span>
<span><span class="co">#&gt;  [25] "cine"                "est_conyugal"        "proveedor"          </span></span>
<span><span class="co">#&gt;  [28] "nacionalidad"        "a1"                  "a2"                 </span></span>
<span><span class="co">#&gt;  [31] "a3"                  "a4"                  "a5"                 </span></span>
<span><span class="co">#&gt;  [34] "a6"                  "a6_otro"             "a7"                 </span></span>
<span><span class="co">#&gt;  [37] "a8"                  "b1_ciuo88"           "b2"                 </span></span>
<span><span class="co">#&gt;  [40] "b3"                  "b4"                  "b5"                 </span></span>
<span><span class="co">#&gt;  [43] "b6"                  "b7_1"                "b7_2"               </span></span>
<span><span class="co">#&gt;  [46] "b7_3"                "b7_4"                "b7_5"               </span></span>
<span><span class="co">#&gt;  [49] "b7_6"                "b7_7"                "b8"                 </span></span>
<span><span class="co">#&gt;  [52] "b9"                  "b10"                 "b11"                </span></span>
<span><span class="co">#&gt;  [55] "b12"                 "b13_ciiu_rev3"       "b14_ciiu_rev3"      </span></span>
<span><span class="co">#&gt;  [58] "b15_1"               "b15_2"               "b16"                </span></span>
<span><span class="co">#&gt;  [61] "b16_otro"            "b17_mes"             "b17_ano"            </span></span>
<span><span class="co">#&gt;  [64] "b18_codigo"          "b18_region"          "b18_varias"         </span></span>
<span><span class="co">#&gt;  [67] "b19"                 "c1"                  "c2_1_1"             </span></span>
<span><span class="co">#&gt;  [70] "c2_1_2"              "c2_1_3"              "c2_2_1"             </span></span>
<span><span class="co">#&gt;  [73] "c2_2_2"              "c2_2_3"              "c3_1"               </span></span>
<span><span class="co">#&gt;  [76] "c3_2"                "c3_3"                "c4"                 </span></span>
<span><span class="co">#&gt;  [79] "c5"                  "c6"                  "c7"                 </span></span>
<span><span class="co">#&gt;  [82] "c8"                  "c9"                  "c10"                </span></span>
<span><span class="co">#&gt;  [85] "c11"                 "c12"                 "c13"                </span></span>
<span><span class="co">#&gt;  [88] "habituales"          "efectivas"           "e1"                 </span></span>
<span><span class="co">#&gt;  [91] "e2"                  "e3_1"                "e3_2"               </span></span>
<span><span class="co">#&gt;  [94] "e3_3"                "e3_4"                "e3_5"               </span></span>
<span><span class="co">#&gt;  [97] "e3_6"                "e3_7"                "e3_8"               </span></span>
<span><span class="co">#&gt; [100] "e3_9"                "e3_10"               "e3_11"              </span></span>
<span><span class="co">#&gt; [103] "e3_12"               "e3_total"            "e4"                 </span></span>
<span><span class="co">#&gt; [106] "e5"                  "e5_dia"              "e5_sem"             </span></span>
<span><span class="co">#&gt; [109] "e5_mes"              "e5_ano"              "e6_mes"             </span></span>
<span><span class="co">#&gt; [112] "e6_ano"              "e7"                  "e8"                 </span></span>
<span><span class="co">#&gt; [115] "e9"                  "e10"                 "e11"                </span></span>
<span><span class="co">#&gt; [118] "e12"                 "e13"                 "e14_mes"            </span></span>
<span><span class="co">#&gt; [121] "e14_ano"             "e15_meses"           "e15_anos"           </span></span>
<span><span class="co">#&gt; [124] "e16_ciuo88"          "e17"                 "e18_ciiu_rev3"      </span></span>
<span><span class="co">#&gt; [127] "e19"                 "e19_otro"            "activ"              </span></span>
<span><span class="co">#&gt; [130] "obe"                 "tpi"                 "id"                 </span></span>
<span><span class="co">#&gt; [133] "ftp"                 "cae_general"         "cae_especifico"     </span></span>
<span><span class="co">#&gt; [136] "categoria_ocupacion" "fact"                "fact_cal"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="downloading-data">Downloading data<a class="anchor" aria-label="anchor" href="#downloading-data"></a>
</h3>
<p>The <code><a href="../reference/get_data.html">get_data()</a></code> function allows us to bring a dataset
from a specific survey. The function has four parameters:
<code>dataset</code>, <code>version</code>, <code>col_list</code> and
<code>save_where</code>. For instance, we can get the <em>ene</em> data
for a specific quarter. If the <code>version</code> parameter is not
specified then it will return the newest version of the survey.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get dataset of a specific version</span></span>
<span><span class="va">ene</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span>, version <span class="op">=</span> <span class="va">file</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Get newest version</span></span>
<span><span class="va">ene2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ene</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index ano_trimestre mes_central ano_encuesta mes_encuesta region provincia</span></span>
<span><span class="co">#&gt; 1     0          2011           8         2011            9      8        82</span></span>
<span><span class="co">#&gt; 2     1          2011           8         2011            9      8        82</span></span>
<span><span class="co">#&gt; 3     2          2011           8         2011            9      6        63</span></span>
<span><span class="co">#&gt;   r_p_c estrato region_15 estrato_15 r_p_c_15 tipo id_directorio</span></span>
<span><span class="co">#&gt; 1  8207    8129         8       8129     8207    3          4161</span></span>
<span><span class="co">#&gt; 2  8207    8129         8       8129     8207    3          4161</span></span>
<span><span class="co">#&gt; 3  6303    6042         6       6042     6303    2          5148</span></span>
<span><span class="co">#&gt;   id_identificacion hogar idrph nro_linea edad tramo_edad sexo parentesco curso</span></span>
<span><span class="co">#&gt; 1              4565     1 17204         1   66       11.0    1          1     3</span></span>
<span><span class="co">#&gt; 2              4588     1 17291         1   43        6.0    1          1     5</span></span>
<span><span class="co">#&gt; 3             16431     1 61955         1   40        6.0    1          1     4</span></span>
<span><span class="co">#&gt;   nivel termino_nivel cine est_conyugal proveedor nacionalidad  a1 a2  a3 a4 a5</span></span>
<span><span class="co">#&gt; 1     3             2    3            1         0          152 1.0    1.0      </span></span>
<span><span class="co">#&gt; 2     3             2    3            2         0          152 1.0    1.0      </span></span>
<span><span class="co">#&gt; 3     4             1    5            1         1          152 1.0    1.0      </span></span>
<span><span class="co">#&gt;   a6 a6_otro a7 a8 b1_ciuo88  b2 b3  b4  b5 b6 b7_1 b7_2 b7_3 b7_4 b7_5 b7_6</span></span>
<span><span class="co">#&gt; 1                        6.0 1.0    2.0                                     </span></span>
<span><span class="co">#&gt; 2                        6.0 1.0    2.0                                     </span></span>
<span><span class="co">#&gt; 3                        9.0 2.0        2.0     1.0  1.0  1.0  1.0  1.0  3.0</span></span>
<span><span class="co">#&gt;   b7_7  b8  b9 b10 b11 b12 b13_ciiu_rev3 b14_ciiu_rev3 b15_1 b15_2 b16 b16_otro</span></span>
<span><span class="co">#&gt; 1                                                  1.0   1.0   1.0 4.0         </span></span>
<span><span class="co">#&gt; 2                                                  1.0   1.0   1.0 4.0         </span></span>
<span><span class="co">#&gt; 3  2.0 1.0 2.0     2.0 1.0                         6.0   4.0       7.0         </span></span>
<span><span class="co">#&gt;   b17_mes b17_ano b18_codigo b18_region b18_varias b19  c1 c2_1_1 c2_1_2 c2_1_3</span></span>
<span><span class="co">#&gt; 1    99.0  1965.0     8207.0        8.0        2.0 2.0 1.0    8.0    7.0   56.0</span></span>
<span><span class="co">#&gt; 2    99.0  1990.0     8207.0        8.0        2.0 2.0 2.0    3.0    7.0   21.0</span></span>
<span><span class="co">#&gt; 3     3.0  2008.0     6101.0        6.0        2.0 2.0 1.0  999.0    6.0   45.0</span></span>
<span><span class="co">#&gt;   c2_2_1 c2_2_2 c2_2_3  c3_1 c3_2 c3_3 c4  c5 c6  c7  c8  c9 c10 c11 c12 c13</span></span>
<span><span class="co">#&gt; 1                                         2.0    2.0         1.0 1.0 1.0    </span></span>
<span><span class="co">#&gt; 2                                         2.0    1.0 3.0 1.0 1.0 1.0 6.0    </span></span>
<span><span class="co">#&gt; 3                      999.0  6.0 45.0    2.0    2.0         2.0         2.0</span></span>
<span><span class="co">#&gt;   habituales efectivas e1  e2 e3_1 e3_2 e3_3 e3_4 e3_5 e3_6 e3_7 e3_8 e3_9</span></span>
<span><span class="co">#&gt; 1       56.0      56.0    2.0                                             </span></span>
<span><span class="co">#&gt; 2       21.0      18.0    2.0                                             </span></span>
<span><span class="co">#&gt; 3       45.0      45.0    2.0                                             </span></span>
<span><span class="co">#&gt;   e3_10 e3_11 e3_12 e3_total e4 e5 e5_dia e5_sem e5_mes e5_ano e6_mes e6_ano e7</span></span>
<span><span class="co">#&gt; 1                        0.0                                                   </span></span>
<span><span class="co">#&gt; 2                        0.0                                                   </span></span>
<span><span class="co">#&gt; 3                        0.0                                                   </span></span>
<span><span class="co">#&gt;   e8 e9 e10 e11 e12 e13 e14_mes e14_ano e15_meses e15_anos e16_ciuo88 e17</span></span>
<span><span class="co">#&gt; 1                                                                        </span></span>
<span><span class="co">#&gt; 2                                                                        </span></span>
<span><span class="co">#&gt; 3                                                                        </span></span>
<span><span class="co">#&gt;   e18_ciiu_rev3 e19 e19_otro activ obe tpi id ftp cae_general cae_especifico</span></span>
<span><span class="co">#&gt; 1                              1.0 0.0 0.0                  1              1</span></span>
<span><span class="co">#&gt; 2                              1.0 0.0 1.0                  1              1</span></span>
<span><span class="co">#&gt; 3                              1.0 0.0 0.0                  1              1</span></span>
<span><span class="co">#&gt;   categoria_ocupacion         fact         fact_cal</span></span>
<span><span class="co">#&gt; 1                   2 105,77030411 86,8648910010612</span></span>
<span><span class="co">#&gt; 2                   2 105,77030411 112,560637427099</span></span>
<span><span class="co">#&gt; 3                   3  80,47339832 103,559180372675</span></span></code></pre></div>
<p>With <code>col_list</code> we can select some of the variables in the
dataset, if not specified it will select all columns. Meanwhile,
<code>save_where</code> allows us to define where the dataset will be
stored. There are four options:</p>
<ul>
<li>
<strong>no</strong>: store in the memory of R enviroment. If the
size overloads the ram memory it will show a warning and a prompt
recommending to save the data in the working directory and asking if the
user wants to proceed.<br>
</li>
<li>
<strong>local</strong>: store in a directory called <em>data/</em>
in the working directory, but not in the R enviroment.</li>
<li>
<strong>both</strong>: store in both parts.</li>
<li>
<strong>no_warning</strong>: under the users responsibility, it will
not show the warning and the datasets will be stored in R
enviroment.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ene_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span>, version <span class="op">=</span> <span class="va">file</span>, col_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ano_trimestre"</span>,<span class="st">"mes_central"</span>,<span class="st">"fact_cal"</span>,<span class="st">"cae_especifico"</span><span class="op">)</span>, save_where <span class="op">=</span> <span class="st">"no"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ene_small</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;           fact_cal ano_trimestre mes_central cae_especifico</span></span>
<span><span class="co">#&gt; 1 86,8648910010612          2011           8              1</span></span>
<span><span class="co">#&gt; 2 112,560637427099          2011           8              1</span></span>
<span><span class="co">#&gt; 3 103,559180372675          2011           8              1</span></span>
<span><span class="co">#&gt; 4 87,3907172436076          2011           8              1</span></span>
<span><span class="co">#&gt; 5  135,46894912875          2011           8              1</span></span>
<span><span class="co">#&gt; 6 119,935658002151          2011           8             13</span></span></code></pre></div>
<p><strong>Important note:</strong> we highly recommend against
downloading the entire dataset. Instead, consider selecting specific
columns, as the full download could consume a substantial amount of time
and storage space.</p>
<p>The <code><a href="../reference/get_many_data.html">get_many_data()</a></code> function allows to download more
than one dataset at the same time. In this example we are getting the
versions between december-january-february (2022-01-def) and
february-march-april (2022-03-fma) 2022 quarters of the <em>ene</em>
survey.<br>
The function has six parameters: <code>dataset</code>,
<code>from</code>, <code>to</code>, <code>col_list</code>,
<code>save_where</code>, <code>memory_warning_limit</code>. The
<code>from</code>and <code>to</code> arguments are mandatory and are
used to filter by the selected periods or versions of a particular
survey. The <code>memory_warning_limit</code> argument allows you to set
the memory limit that triggers the warning when downloading to R
memory.<br>
The output is a list of <em>dataframes</em>. In this case we can see the
<em>df_list</em> contains 3 elements.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_list</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/get_many_data.html">get_many_data</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"ene"</span>, from <span class="op">=</span> <span class="st">"2022-01-def"</span>, to <span class="op">=</span> <span class="st">"2022-03-fma"</span> <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">df_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>We can convert the three <em>dataframes</em> into one table</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ene_table</span> <span class="op">&lt;-</span>  <span class="va">df_list</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">bind_rows</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Important note:</strong> different versions of the same
dataset are not always compatible, so, the <code>bind_rows()</code>
method won’t always work. Be always careful when joining multiple
versions and check their structure before proceeding.</p>
</div>
</div>
<div class="section level2">
<h2 id="api-tutorial">API Tutorial<a class="anchor" aria-label="anchor" href="#api-tutorial"></a>
</h2>
<p>The R package works with a service developed in Python, whose
documentation can be found <a href="http://10.90.10.46:7000/docs" class="external-link">here</a>.Below are the endpoints and
a link to the documentation.</p>
<p><strong>Important note:</strong> when interacting directly with the
API, it is important to be aware that due to data format restrictions,
any cells that were originally NA will be displayed as empty text.</p>
<div class="section level3">
<h3 id="returns-available-datasets">Returns available datasets<a class="anchor" aria-label="anchor" href="#returns-available-datasets"></a>
</h3>
<p>A <em>.json</em> file is entered containing the survey, version and
optionally a list of columns. If a list of columns is not entered, the
API returns a table with all the columns of the survey. The final output
is also in a <em>.json</em> format.<br>
The next example shows how to get the dataset of the <em>enusc</em> 2017
survey selecting the columns “P1_1_1” and “P3_1_1” in a <em>.json</em>
format.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dataset"</span><span class="sc">:</span> <span class="st">"enusc"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"version"</span><span class="sc">:</span> <span class="st">"2017"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"col_list"</span><span class="sc">:</span> [</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_1_1"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P3_1_1"</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The endpoint is the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span><span class="dv">10</span>.<span class="dv">90</span>.<span class="fl">10.46</span><span class="sc">:</span><span class="dv">7000</span><span class="sc">/</span>data</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="returns-the-columns-of-a-file">Returns the columns of a file<a class="anchor" aria-label="anchor" href="#returns-the-columns-of-a-file"></a>
</h3>
<p>The user has to enter the dataset and version, then the API will
return a vector containing the columns of the selected dataset.</p>
<p>The endpoint is the following:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span><span class="dv">10</span>.<span class="dv">90</span>.<span class="fl">10.46</span><span class="sc">:</span><span class="dv">7000</span><span class="sc">/</span>colnames</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="returns-summary-data">Returns summary data<a class="anchor" aria-label="anchor" href="#returns-summary-data"></a>
</h3>
<p>Delivers metadata of the available tables. Optionally, you can enter
a survey to filter using the parameter <em>dataset_filter</em>,
obtaining the metadata of the tables associated with that survey in
<em>.json</em> format. Data includes dataset name, dataset version,
number of rows, number of columns and file size in bytes.</p>
<p>The endpoint is the following:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span><span class="dv">10</span>.<span class="dv">90</span>.<span class="fl">10.46</span><span class="sc">:</span><span class="dv">7000</span><span class="sc">/</span>info</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
